{"html":"<p>A vida de um gerente de loja no mundo do eCommerce nem sempre √© glamourosa. Voc√™ pode sonhar com lan√ßamentos de produtos incr√≠veis e receita disparando, mas muitas vezes acaba preso escrevendo descri√ß√µes de produtos manualmente, preenchendo campos no Magento e tomando uma quantidade excessiva de mate.</p>\n<p><strong>Mas n√£o precisa ser assim.</strong> Neste post, vou te guiar pelo processo de cria√ß√£o de uma extens√£o Magento 2 que automatiza a gera√ß√£o de descri√ß√µes de produtos usando <strong>modelos de IA</strong> como <strong>OpenAI GPT-4</strong> e <strong>Google Gemini</strong>.</p>\n<p>Por que humanos deveriam gastar horas escrevendo descri√ß√µes se podemos fazer as m√°quinas fazerem isso por n√≥s? Vamos ao trabalho!</p>\n<h2 id=\"o-problema\" style=\"position:relative;\"><a href=\"#o-problema\" aria-label=\"o problema permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>O Problema</h2>\n<p>Escrever descri√ß√µes de produtos deveria ser responsabilidade do fornecedor, mas muitas vezes n√£o √© o caso, e os gerentes de loja acabam tendo que assumir essa tarefa tediosa. Ponto final. No entanto, √© essencial para SEO, vendas e para fornecer aos clientes as informa√ß√µes necess√°rias para comprar.</p>\n<p>Escrever manualmente centenas ou milhares de descri√ß√µes pode ser extremamente demorado. Eu queria uma solu√ß√£o que pudesse:</p>\n<ul>\n<li><strong>Usar IA</strong> para gerar descri√ß√µes envolventes e concisas.</li>\n<li>Extrair <strong>dados de produtos dinamicamente</strong>: nome, categorias, pre√ßo, etc.</li>\n<li>Ser facilmente configur√°vel para que os usu√°rios pudessem escolher entre provedores de IA como <strong>OpenAI</strong> e <strong>Google Gemini</strong>.</li>\n</ul>\n<h2 id=\"planejamento-da-extensao\" style=\"position:relative;\"><a href=\"#planejamento-da-extensao\" aria-label=\"planejamento da extensao permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Planejamento da Extens√£o</h2>\n<p>Para come√ßar, eu mapeei os principais recursos que eu queria:</p>\n<ol>\n<li><strong>Ativar/Desativar o recurso</strong>: Os lojistas devem poder ativar ou desativar o recurso.</li>\n<li><strong>Sele√ß√£o do provedor de IA</strong>: Permitir a troca entre as APIs do OpenAI e do Gemini.</li>\n<li><strong>Entradas de dados din√¢micos</strong>: Usar dados de produtos em tempo real, como nome, pre√ßo e categorias.</li>\n<li><strong>Configura√ß√µes de administra√ß√£o</strong>: Adicionar campos para chaves de API e uma mensagem personalizada para orientar a sa√≠da da IA.</li>\n</ol>\n<p>Para isso, aproveitei o sistema de configura√ß√£o de administra√ß√£o existente do Magento e constru√≠ um controlador backend para interagir com as APIs de IA.</p>\n<h2 id=\"codificando-a-extensao\" style=\"position:relative;\"><a href=\"#codificando-a-extensao\" aria-label=\"codificando a extensao permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Codificando a Extens√£o</h2>\n<h3 id=\"estrutura-de-arquivos\" style=\"position:relative;\"><a href=\"#estrutura-de-arquivos\" aria-label=\"estrutura de arquivos permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Estrutura de Arquivos</h3>\n<p>O Magento √© constru√≠do em uma estrutura modular, o que facilita a cria√ß√£o de extens√µes ‚Äúplug and play‚Äù. Toda extens√£o deve ter o nome de um fornecedor (como <strong>Werules</strong>) e o nome de um m√≥dulo (como <strong>Autofill</strong>). Dentro do diret√≥rio <code class=\"language-text\">app/code</code>, voc√™ cria a estrutura <code class=\"language-text\">Vendor/Module</code>.</p>\n<p>Veja como a estrutura de arquivos ficou para esta extens√£o:</p>\n<div class=\"copy-code-block\"><button tabindex=\"0\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">app/\n‚îî‚îÄ code/\n    ‚îî‚îÄ Werules/\n        ‚îî‚îÄ Autofill/\n            ‚îú‚îÄ Block/\n            ‚îÇ   ‚îî‚îÄ Adminhtml/\n            ‚îÇ       ‚îî‚îÄ AutofillButton.php\n            ‚îú‚îÄ Controller/\n            ‚îÇ   ‚îî‚îÄ Adminhtml/\n            ‚îÇ       ‚îî‚îÄ Autofill/\n            ‚îÇ           ‚îî‚îÄ Generate.php\n            ‚îú‚îÄ Model/\n            ‚îÇ   ‚îî‚îÄ Config/\n            ‚îÇ       ‚îî‚îÄ Source/\n            ‚îÇ           ‚îî‚îÄ ApiProvider.php\n            ‚îú‚îÄ etc/\n            ‚îÇ   ‚îú‚îÄ adminhtml/\n            ‚îÇ   ‚îÇ   ‚îú‚îÄ di.xml\n            ‚îÇ   ‚îÇ   ‚îú‚îÄ routes.xml\n            ‚îÇ   ‚îÇ   ‚îî‚îÄ system.xml\n            ‚îÇ   ‚îú‚îÄ default.xml\n            ‚îÇ   ‚îî‚îÄ module.xml\n            ‚îú‚îÄ registration.php\n            ‚îî‚îÄ view/\n                ‚îî‚îÄ adminhtml/\n                    ‚îú‚îÄ layout/\n                    ‚îÇ   ‚îî‚îÄ catalog_product_edit.xml\n                    ‚îî‚îÄ templates/\n                        ‚îî‚îÄ button.phtml</code></pre></div></div>\n<h3 id=\"configuracao-do-admin\" style=\"position:relative;\"><a href=\"#configuracao-do-admin\" aria-label=\"configuracao do admin permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Configura√ß√£o do Admin</h3>\n<p>Primeiro, adicionei op√ß√µes de configura√ß√£o em <strong>Lojas &gt; Configura√ß√£o &gt; Werules Autofill</strong>. Aqui est√° uma r√°pida vis√£o geral das configura√ß√µes criadas:</p>\n<ul>\n<li><strong>Ativar recurso de preenchimento autom√°tico</strong> (alternar sim/n√£o)</li>\n<li><strong>Provedor de IA</strong> (dropdown: OpenAI ou Gemini)</li>\n<li><strong>Chave da API OpenAI</strong></li>\n<li><strong>Chave da API Gemini</strong></li>\n<li><strong>Mensagem personalizada para LLM</strong> (instru√ß√µes personalizadas para a sa√≠da da IA)</li>\n</ul>\n<p>Aqui est√° o trecho XML para adicionar essas configura√ß√µes:</p>\n<div class=\"copy-code-block\"><button tabindex=\"1\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>field</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>api_provider<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">translate</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>label<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>select<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">sortOrder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>6<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">showInDefault</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">&gt;</span></span>AI Provider<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>source_model</span><span class=\"token punctuation\">&gt;</span></span>Werules\\Autofill\\Model\\Config\\Source\\ApiProvider<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>source_model</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>field</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>field</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>api_key<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">sortOrder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">&gt;</span></span>OpenAI API Key<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>field</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>field</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>gemini_api_key<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">sortOrder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>15<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">&gt;</span></span>Gemini API Key<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>field</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>field</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>system_message<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>textarea<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">sortOrder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">&gt;</span></span>System Message for LLM<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>field</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div></div>\n<p>Com isso, criei um dropdown para selecionar o provedor de IA e campos para armazenar as chaves de API com seguran√ßa.</p>\n<p></p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 42.1875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAw0lEQVQY04XQwY7DIAwE0Pz/fyaKlICx42JjCqwCVdpGu9p34MTAaCYA2J1j5uM4iCjGaGatyzlbzrXW9q12rbWJiLz32IUQVPW6ZGYHs4g8P5RSJMac8yu8bduv4Vrro1NV6c5oKWZWSjnDSLSuq/c+hAAAIvL5s/feci7Pu1ftBwIiaScio8/4VkVijMyMISDRqMbM7zAF2PdzsLFZSuk2z3g3pXSdqvoebFkW5xwi3mpfFdofJkSc5xkAiOg22L9+ADVJ0ubVij0/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Configura√ß√£o da Extens√£o\" title=\"Configura√ß√£o da Extens√£o\" src=\"/static/401fbe46efac2c73c987aa0917b4dfd1/42a19/extension-configuration.png\" srcset=\"/static/401fbe46efac2c73c987aa0917b4dfd1/e3135/extension-configuration.png 256w,\n/static/401fbe46efac2c73c987aa0917b4dfd1/06341/extension-configuration.png 512w,\n/static/401fbe46efac2c73c987aa0917b4dfd1/42a19/extension-configuration.png 1024w,\n/static/401fbe46efac2c73c987aa0917b4dfd1/e8464/extension-configuration.png 1536w,\n/static/401fbe46efac2c73c987aa0917b4dfd1/3e510/extension-configuration.png 1616w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Configura√ß√£o da Extens√£o</figcaption>\n  </figure><p></p>\n<h3 id=\"o-botao-na-pagina-de-produto\" style=\"position:relative;\"><a href=\"#o-botao-na-pagina-de-produto\" aria-label=\"o botao na pagina de produto permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>O bot√£o na p√°gina de produto</h3>\n<p>Em seguida, injetei um bot√£o personalizado na <strong>P√°gina de Edi√ß√£o de Produto</strong> no admin do Magento. Quando clicado, esse bot√£o envia os dados do produto para o controlador backend e obt√©m a descri√ß√£o gerada pela IA.</p>\n<p>Aqui est√° o script do frontend:</p>\n<div class=\"copy-code-block\"><button tabindex=\"2\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'jquery'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">$</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">fetchAutofillData</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> productId <span class=\"token operator\">=</span> <span class=\"token string\">'&lt;?= $productId ?&gt;'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">var</span> productName <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[name=\"product[name]\"]'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">val</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">'N/A'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">var</span> productPrice <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[name=\"product[price]\"]'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">val</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">'N/A'</span><span class=\"token punctuation\">;</span>\n\n        $<span class=\"token punctuation\">.</span><span class=\"token function\">ajax</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> <span class=\"token string\">'&lt;?= $ajaxUrl ?&gt;'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">product_id</span><span class=\"token operator\">:</span> productId<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">product_name</span><span class=\"token operator\">:</span> productName<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">product_price</span><span class=\"token operator\">:</span> productPrice <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function-variable function\">success</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#product_form_short_description'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">val</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>short_description<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div></div>\n<p>Quando o bot√£o √© clicado, os dados do produto s√£o enviados para o controlador backend, que ent√£o chama a API de IA para gerar a descri√ß√£o. Assim √© como o bot√£o fica na p√°gina do produto:</p>\n<p></p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 40.23437500000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAhklEQVQY083RSwoCMRAE0Nx/JXgUXXgKT+DejIwQNAnGdFXJ/GDIMHvfsppqGtqVUmo1LQDYDCS1RYggAcAtkXLKMcYQgvf+2fdd51NKw2QCo2T3Wzof4+nwuV4kufVSjLjDAAJClVXB2jLHa7Rj2rtO/r9sZC6lCdvy8KINkvlbHu9XU/4BOYDZNuzn//QAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Automatizando a descri√ß√£o\" title=\"Automatizando a descri√ß√£o\" src=\"/static/9df9e25c49506ef18466d8ebd89c42ad/42a19/autofill-short-description.png\" srcset=\"/static/9df9e25c49506ef18466d8ebd89c42ad/e3135/autofill-short-description.png 256w,\n/static/9df9e25c49506ef18466d8ebd89c42ad/06341/autofill-short-description.png 512w,\n/static/9df9e25c49506ef18466d8ebd89c42ad/42a19/autofill-short-description.png 1024w,\n/static/9df9e25c49506ef18466d8ebd89c42ad/89e0a/autofill-short-description.png 1355w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Automatizando a descri√ß√£o</figcaption>\n  </figure><p></p>\n<h3 id=\"conectando-com-openai-e-gemini\" style=\"position:relative;\"><a href=\"#conectando-com-openai-e-gemini\" aria-label=\"conectando com openai e gemini permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conectando com OpenAI e Gemini</h3>\n<p>O controlador backend verifica o provedor selecionado e chama a API apropriada. Aqui est√° a fun√ß√£o para interagir com o Google Gemini:</p>\n<div class=\"copy-code-block\"><button tabindex=\"3\" type=\"button\" class=\"MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary copy-code-button\"><span class=\"MuiButton-label\">Copiar</span></button><div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">generateDescriptionFromGemini</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$prompt</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$apiKey</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$ch</span> <span class=\"token operator\">=</span> <span class=\"token function\">curl_init</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateText?key=<span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token variable\">$apiKey</span><span class=\"token punctuation\">}</span></span>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$data</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'contents'</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'parts'</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'text'</span> <span class=\"token operator\">=&gt;</span> <span class=\"token variable\">$prompt</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">curl_setopt</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ch</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">CURLOPT_HTTPHEADER</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'Content-Type: application/json'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">curl_setopt</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ch</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">CURLOPT_POSTFIELDS</span><span class=\"token punctuation\">,</span> <span class=\"token function\">json_encode</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$data</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">curl_setopt</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ch</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">CURLOPT_RETURNTRANSFER</span><span class=\"token punctuation\">,</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> <span class=\"token function\">curl_exec</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ch</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$decoded</span> <span class=\"token operator\">=</span> <span class=\"token function\">json_decode</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$response</span><span class=\"token punctuation\">,</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token variable\">$decoded</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'candidates'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'content'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">??</span> <span class=\"token string single-quoted-string\">'No description generated.'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div></div>\n<p>Ao escolher dinamicamente entre OpenAI e Gemini, os lojistas podem usar o servi√ßo de IA que melhor se adapta √†s suas necessidades.</p>\n<h2 id=\"testando-a-extensao\" style=\"position:relative;\"><a href=\"#testando-a-extensao\" aria-label=\"testando a extensao permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Testando a Extens√£o</h2>\n<p>Depois de configurar tudo, testei o fluxo:</p>\n<ol>\n<li><strong>Ative o recurso</strong> no painel de administra√ß√£o.</li>\n<li>Selecione <strong>OpenAI</strong> ou <strong>Gemini</strong> e insira a chave de API correspondente.</li>\n<li>V√° para a <strong>P√°gina de Edi√ß√£o de Produto</strong> e clique no bot√£o <strong>‚ÄúPreencher descri√ß√£o curta‚Äù</strong>.</li>\n</ol>\n<p>O bot√£o enviou os dados do produto (nome, pre√ßo, categorias) para a IA e obteve uma descri√ß√£o concisa.</p>\n<h2 id=\"publicando-a-extensao\" style=\"position:relative;\"><a href=\"#publicando-a-extensao\" aria-label=\"publicando a extensao permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Publicando a Extens√£o</h2>\n<p>Para tornar a extens√£o acess√≠vel a todos, eu a publiquei no GitHub:<br>\nüëâ <a href=\"https://github.com/blopa/magento-short-description-autofill\" target=\"_blank\" rel=\"noreferrer\"><strong>Magento 2 Short Description Autofill</strong></a></p>\n<h2 id=\"consideracoes-finais\" style=\"position:relative;\"><a href=\"#consideracoes-finais\" aria-label=\"consideracoes finais permalink\" class=\"post-headers-link before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Considera√ß√µes Finais</h2>\n<p>Este projeto foi uma explora√ß√£o divertida de como combinar Magento 2 com ferramentas de IA como OpenAI e Gemini. Automatizar tarefas repetitivas, como escrever descri√ß√µes de produtos, √© uma √≥tima maneira de economizar tempo e energia para os lojistas.</p>\n<p>Seja voc√™ o propriet√°rio de uma loja de eCommerce ou algu√©m que gerencia centenas de produtos, integrar a IA pode melhorar significativamente seu fluxo de trabalho.</p>\n<p>Sinta-se √† vontade para conferir a extens√£o, contribuir com o projeto ou compartilhar suas ideias para novos recursos. Vamos continuar fazendo as m√°quinas realizarem as tarefas chatas enquanto focamos no crescimento dos nossos neg√≥cios üöÄ.</p>\n<p><strong>At√© a pr√≥xima!</strong></p>","path":"/pt-br/blog/coding/criando-uma-extensao-magento-2-para-automatizar-a-descricao-de-produtos/","title":"Criando uma extens√£o Magento 2 para automatizar a descri√ß√£o de produtos","language":"pt-br","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDI0LTEyLTE5VDAwOjAwOjAwLjAwMFo=","comments":[],"relatedPosts":[{"path":"/pt-br/blog/coding/eu-criei-uma-extensao-em-estilo-rpg-retro-para-a-minha-loja-do-magento-2/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDI1LTAyLTAyVDAwOjAwOjAwLjAwMFo=","title":"Eu criei uma extens√£o em estilo RPG retro para a minha loja do Magento 2","date":"2025-02-02T00:00:00.000Z"},{"path":"/pt-br/blog/coding/compartilhando-cookies-encriptados-do-laravel-com-next-js/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDI0LTEwLTI1VDAwOjAwOjAwLjAwMFo=","title":"Compartilhando cookies encriptados do Laravel com Next.js","date":"2024-10-25T00:00:00.000Z"},{"path":"/pt-br/blog/coding/como-automatizar-a-criacao-de-instagram-reels-usando-gpt-da-openai/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTEyLTIwVDAwOjAwOjAwLjAwMFo=","title":"Como automatizar a cria√ß√£o de Instagram Reels usando GPT da OpenAI","date":"2023-12-20T00:00:00.000Z"},{"path":"/pt-br/blog/games/um-guia-para-a-busca-de-retro-games-em-seoul/","postHashId":"Z2FtZXN0cnVlbnVsbDIwMjQtMTAtMjFUMDA6MDA6MDAuMDAwWg==","title":"Um guia para a busca de retro games em Seul","date":"2024-10-21T00:00:00.000Z"},{"path":"/pt-br/blog/coding/musclog-aproveitando-minha-experiencia-com-reactjs-para-criar-um-app-em-react-native/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDI0LTA5LTIxVDAwOjAwOjAwLjAwMFo=","title":"Musclog: Aproveitando minha experi√™ncia com React.js para criar um App em React Native","date":"2024-09-21T00:00:00.000Z"},{"path":"/pt-br/blog/coding/calculando-minhas-horas-de-trabalho-em-projetos-pessoais-usando-nodejs/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDI0LTA2LTE2VDAwOjAwOjAwLjAwMFo=","title":"Calculando minhas horas de trabalho em projetos pessoais usando Node.js","date":"2024-06-16T00:00:00.000Z"},{"path":"/pt-br/blog/coding/transformando-paginas-de-manga-para-leitores-ocidentais-preguicosos/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDI0LTA1LTAxVDAwOjAwOjAwLjAwMFo=","title":"Transformando p√°ginas de mang√° para leitores ocidentais pregui√ßosos","date":"2024-05-01T00:00:00.000Z"},{"path":"/pt-br/blog/coding/como-criar-thumbnails-para-seus-videos-automaticamente-com-nodejs/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTEwLTI1VDAwOjAwOjAwLjAwMFo=","title":"Como criar thumbnails para seus v√≠deos automaticamente com Node.js","date":"2023-10-25T00:00:00.000Z"},{"path":"/pt-br/blog/coding/publicando-reels-no-instagram-usando-nodejs-e-a-arte-de-superar-limitacoes/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTEwLTE0VDAwOjAwOjAwLjAwMFo=","title":"Publicando Reels no Instagram usando Node.js e a arte de superar limita√ß√µes","date":"2023-10-14T00:00:00.000Z"},{"path":"/pt-br/blog/coding/meu-blog-tem-stories-agora-mas-nao-me-pergunte-por-que/","postHashId":"Y29kaW5ndHJ1ZW51bGwyMDIzLTA5LTA0VDAwOjAwOjAwLjAwMFo=","title":"Meu blog tem Stories agora, mas n√£o me pergunte por qu√™","date":"2023-09-04T00:00:00.000Z"}]}